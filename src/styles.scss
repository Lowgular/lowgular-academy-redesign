@use "./styles/_variables.scss" as *;
@use "./styles/_buttons.scss" as *;
@use "./styles/_chips.scss" as *;
@use "./styles/_lists.scss" as *;
@use "./styles/_text.scss" as *;
@use "./styles/_tags.scss" as *;
@use "./styles/_pills.scss" as *;
@use "./styles/_links.scss" as *;
@use "./styles/_alerts.scss" as *;
@use "./styles/_navbar.scss" as *;
@use "./styles/_stepper.scss" as *;
@use "./styles/_hr.scss" as *;
@use "./styles/_tasks.scss" as *;
@use "./styles/_articles.scss" as *;

* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 400 15px/1.5 Inter, system-ui, -apple-system, Segoe UI, Roboto,
    "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol";
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  min-height: 100vh;
  grid-template-rows: 1fr auto;
}

app-root {
  height: 100%;
  min-height: 0; /* allow inner scrollports */
  display: block; /* default, just explicit */
}

app-root > *:not(router-outlet) {
  height: 100%;
  min-height: 0;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* Screen-reader only utility (if you donâ€™t already have one) */
.sr-only {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.wrap {
  width: 100%;
  margin: 0 auto;
  padding: 0px 18px 48px;
  min-height: 0;
  overflow: auto;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  display: flex;
  justify-content: center;
}

.content {
  max-width: var(--container-w);
}

/* Simple layout helper for demos */
.btn-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

section {
  display: grid;
  gap: 14px;
}

/* Cards / Tasks containers */
.stack {
  display: grid;
  gap: 14px;
}

/* Base card */
.card {
  background: var(--surface);
  border: 0;
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: var(--pad-2);
}

/* Learning Card (module) */
.learning {
  display: grid;
  gap: var(--gap-2);
}
.learning .head {
  display: flex;
  align-items: center;
  gap: var(--gap-2);
  justify-content: space-between;
}

/* Progress (for "in progress" examples) */
.progress {
  height: 6px;
  border-radius: 999px;
  background: var(--surface-2);
  overflow: hidden;
}
.progress > span {
  display: block;
  height: 100%;
  background: linear-gradient(
    180deg,
    color-mix(in oklab, var(--accent) 78%, white),
    var(--accent)
  );
  width: var(--w, 50%);
}

/* Pattern container (not a card: light rails & dividers) */
.lg-pattern {
  border: 1px solid var(--container-outline-weak);
  border-radius: var(--radius);
  background: color-mix(in oklab, var(--surface) 40%, transparent);
  overflow: hidden;
  margin: 0; /* fits inside .wrap gaps */
}
.lg-pattern + .lg-pattern {
  margin-top: 12px;
}

.lg-pattern__head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  padding: var(--pad-2);
  background: color-mix(in oklab, var(--surface-2) 60%, transparent);
  border-bottom: 1px dashed var(--container-outline-weak);
}
.lg-pattern__title {
  margin: 0;
  font-weight: 700;
  letter-spacing: -0.01em;
}

/* Task item */
.task {
  display: grid;
  gap: var(--gap-2);
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: var(--pad-2);
}
.task .top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gap-2);
}
.task .meta {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--muted);
  font-size: 13px;
}
.task .title {
  margin: 0;
  font-weight: 600;
}
.task .desc {
  margin: 0;
  color: var(--muted);
}
.task .foot {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--gap-2);
}

/* Focus & reduced motion */
:where(button, a, [tabindex]):focus-visible {
  outline: 2px solid color-mix(in oklab, var(--accent) 70%, white);
  outline-offset: 3px;
  border-radius: 6px;
}
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* Micro helpers */
.row {
  display: flex;
  gap: var(--gap-2);
  align-items: center;
}

/* Constrain width like your pages */
.lg-wrapper {
  max-width: var(--container-w);
}

/* Sections & cards: match your surfaces, radius, shadow, spacing */
.lg-section {
  background: var(--surface-2);
  border: 1px solid var(--container-outline-weak);
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: var(--pad-2);
}

.lg-card {
  background: var(--surface);
  border: 0;
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: var(--pad-2);
}
.lg-card.is-compact {
  gap: var(--gap-2);
}
.lg-card.is-detailed {
  gap: var(--gap-2);
}

/* Status stripe: subtle like your hairline */
.lg-stripe {
  height: 2px;
  background: var(--surface-2);
  border-radius: 2px;
}

/* Navbar demo block (if present): use your navbar styling instead */
.lg-demo-nav {
  background: color-mix(in oklab, var(--surface) 86%, transparent);
  border: 1px dashed var(--container-outline-weak);
}

/* Auth card spacing */
.auth-card {
  display: grid;
  gap: var(--gap-2);
}

/* Fields */
.auth-form {
  display: grid;
  gap: var(--gap-2);
}
.auth-form .field {
  display: grid;
  gap: 6px;
}
.auth-form .field label {
  font-weight: 600;
  color: var(--text);
}
.auth-form .field input {
  width: 100%;
  border-radius: var(--radius);
  border: 1px solid var(--container-outline-weak);
  background: var(--surface-2);
  color: var(--text);
  padding: 10px 12px;
  font: inherit;
}
.auth-form .field input::placeholder {
  color: color-mix(in oklab, var(--muted) 80%, transparent);
}
.auth-form .field input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 24%, transparent);
  outline: none;
}

/* Pattern map */
.pattern-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin: 8px 0 4px;
}
.pattern-title {
  margin: 0;
  font-weight: 700;
  font-size: 16px;
  letter-spacing: -0.01em;
}

.taxo {
  margin: 6px 0 0;
}
.taxo dt {
  margin-top: 10px;
  font-weight: 700;
  color: var(--text);
}
.taxo dd {
  margin: 6px 0 0 0;
}
.impl-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 8px;
}
.impl {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: space-between;
}
.impl .tag {
  min-width: 0;
}
/* star level reuse (from earlier) */
.level--star {
  --tone: var(--accent);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--text-high);
}
.level--star .icon {
  width: 14px;
  height: 14px;
  fill: var(--tone);
  filter: drop-shadow(0 0 0.5px rgba(0, 0, 0, 0.4));
}
.level--star .n {
  font-size: 12px;
  font-weight: 800;
}
.level--star[data-tone="primary"] {
  --tone: var(--primary);
}
.level--star[data-tone="success"] {
  --tone: var(--success);
}

@media (max-width: 520px) {
  .impl {
    gap: 8px;
  }
  .pattern-head {
    align-items: start;
    flex-direction: column;
  }
}
